FROM openjdk:17-alpine
RUN addgroup -S spring && adduser -S spring -G spring
ENV ENV_DB_HOST=${DB_HOST}
ENV ENV_DB_PORT=${DOCKER_DB_PORT}
ENV ENV_DB_USERNAME=${DOCKER_DB_USERNAME}
ENV ENV_DB_PASSWORD=${DOCKER_DB_PASSWORD}
ENV ENV_DB_FLYWAY_USERNAME=${DOCKER_FLYWAY_USER}
ENV ENV_DB_FLYWAY_PASSWORD=${DOCKER_FLYWAY_PASSWORD}
USER spring:spring
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} app.jar
ENTRYPOINT [ "java", "-jar", "/app.jar" ]